AGENTS.md 作成ガイド
===================

目的
----
機能設計が固まったあと、AI エージェントに最初に渡す「プロジェクト全体の参照ファイル」を作る。人間は基本的に機能単位の `function.md`や`/task` などを更新し、AI は AGENTS.md の規約を常に参照する運用を徹底する。ここの更新も最終的には自動化したい

最初に必ず書くこと
------------------
- リポジトリガイドライン: アプリの目的、達成指標、常に読むべきファイル（例: `function.md`、設計資料、運用ポリシー）。
- 重要強調: 以下のルールに必ず従うこと、機能別ファイルは AGENTS.md を前提に解釈することを明記する。

構成ガイド（粒度は細かく、責務は分散）
--------------------------------------
- ディレクトリ構造とインポートルール: 依存方向、レイヤー分離、禁止インポート。
- UI 方針: 使用コンポーネント体系（例: shadcn など）、デザイン原則、アクセシビリティ。
- 命名・コメント・コーディング規則: 関数/コンポーネントの責務最小化、コメントの方針。
- データベース/データ I/O: 読み書きルール、トランザクション、バリデーション。
- コンポーネント分割/ロジック規則: プレゼンテーションとビジネスロジックの分離方針。
- API ルール: エンドポイント規約、エラーハンドリング、タイムアウト・リトライ、スキーマ参照先。
- ログ構造とルール: ログレベル、トレース ID、PII マスキング。
- テスト作成ルール: 優先シナリオ、モック方針、カバレッジ目標、必須/任意の観点。
- ブランチ戦略: ブランチ命名、保護設定、PR 前後の必須チェック。
- AI レビュー: 実装レビューとテストレビューのルールを分けて記載し、出力形式・優先度を明示。
- レビュー後のリファクタ: 追従修正時の方針、段階的リファクタの優先順位。
- その他のルール: プロンプト精査やモデル選定など、補足事項があれば追記。

運用メモ
--------
- 実装前に初版を作り、スプリントごとに更新履歴を残す。
- 重要変更（API/スキーマ/制約/ブランチ戦略）は冒頭に「変更サマリ」として記載し、見落としを防ぐ。
